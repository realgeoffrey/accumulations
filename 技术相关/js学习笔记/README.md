#js学习笔记

- if中用赋值（大部分是误用）并非总是返回真值，条件判断赋值内容Boolen后为假即判断为假：`if(a = false){...}`。

- JS性能
    - 平稳退化：当浏览器不支持或禁用了JS功能后，访问者也能完成最基本的内容访问。
        - 为JS代码预留出退路（html标签添加属性链接，用js事件绑定去拦截浏览器默认行为）
            >`<a href="真实地址" class="j-func">...</a>`

        - ~~伪协议(javascript:)~~
            >`<a href="javascript: func();">...</a>`

        - ~~内嵌事件处理函数~~
            >`<a href="#" onclick="func();return false;">...</a>`

    - 渐进增强：对具体某功能支持的判断，并向后兼容，用一些额外信息层去包裹原始内容。
    - 向后兼容：确保老版本浏览器功能，使之虽不能支持某些功能，但仍能基本访问。
        - 对象检测：`if(func){func();}`
        - ~~浏览器嗅探技术~~
    - 资源分离：把样式表和脚本分离出html。
        - 使用外部资源。
        - 不在html上用事件处理函数。
        - 对只为DOM增添的内容，转移到外部资源中动态创建。
    - 性能提升。
        - 减少访问DOM（搜索结果保存在变量中）。
        - 减少外链请求数量（合并js、css、图片）。
        - 压缩资源。
        - 脚本放置在`</body>`前。

- DOM加载步骤、jQuery的文档ready事件和js的onload事件顺序
    1. 解析Html结构
    2. 加载外部脚本和样式表文件
    3. 解析并执行脚本代码
    4. 构造Html DOM模型 ->完成后执行`$(document).ready(function(){});`
    5. 加载图片等外部文件
    6. 页面加载完毕 -> 完成后执行`window.onload();`

- 构造函数中的变量

    实例化（new）一个构造函数,得到的对象拥有构造函数内用`this`定义的属性(或方法),在构造函数内的`var`变量无法被这个对象使用,只能在构造函数里使用(类似私有变量).

- localStorage、sessionStorage、cookie

    都存储在本地

    - `localStorage`:
        - 同源,除非被清除，否则永久保存
        - 5m
        - 仅在客户端（即浏览器）中保存，不参与和服务器的通信
        - 源生接口可以接受，亦可再次封装来对Object和Array有更好的支持
        - 应用场景:所有需要长期本地存储的数据
        一个域名存储一个localStorage对象,意味着随时修改一个会话的值,同域名下的其他会话的值也会变化(因为修改和访问的都是本地文件).
        除非手动删除,否则用不删除,一个域名4m.
    - `sessionStorage`:

        - 仅在同源且当前会话(tab窗口)下有效,跳转页面为同源后仍旧有效，关闭页面或浏览器后被清除
        - 5m
        - 仅在客户端（即浏览器）中保存，不参与和服务器的通信
        - 源生接口可以接受，亦可再次封装来对Object和Array有更好的支持
        - 应用场景:拆分成多个子页面的填写数据
        一个会话存储一个sessionStorage对象,不同tab的值不共通.
        只在单个会话中保存,会话关闭则删除,一个会话4m.
    - `cookie`:
        - 同源,一般由服务器生成，可设置失效时间。如果在浏览器端生成Cookie，默认是关闭浏览器后失效
        - 4k
        - 每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题
        - 需要程序员自己封装，源生的Cookie接口不友好
        - 应用场景:主要判断用户登录
        每个http请求都会携带,一个域名4k.